# 快速上线详细路线图

## 项目概览
- **目标**: 100 日活用户
- **周期**: 4 周
- **人力**: 1 人独立开发
- **上线方式**: 微信小程序渠道

---

## 📅 第 1-2 周：MVP 开发

### Week 1: Day 1-2 后端基础搭建

#### Day 1
- [ ] 创建 Node.js + Express 项目
- [ ] 配置 PostgreSQL 连接池
- [ ] 完成基础中间件（CORS、日志、错误处理）
- [ ] 编写 `.env` 配置模板
- [ ] 集成基础项目结构

**交付物**: 后端项目骨架 + 可运行的开发服务器

#### Day 2
- [ ] 配置 JWT 认证中间件
- [ ] 创建用户模型和数据库迁移
- [ ] 实现用户注册/登录接口
- [ ] 添加请求参数验证

**交付物**: 用户认证模块可用

---

### Week 1: Day 3-4 数据模型设计

#### Day 3
- [ ] 设计 `divinations` 表（起卦记录）
- [ ] 设计 `operation_logs` 表
- [ ] 创建数据库索引（user_id, created_at）
- [ ] 编写数据模型类

**交付物**: 完整数据库 Schema + ORM 模型

#### Day 4
- [ ] 创建起卦记录 CRUD 接口
- [ ] 实现历史记录查询（分页）
- [ ] 添加访问权限验证
- [ ] 编写单元测试

**交付物**: 起卦数据管理 API 可用

---

### Week 1: Day 5 DeepSeek 集成

#### Day 5
- [ ] 申请 DeepSeek API Key
- [ ] 集成 DeepSeek HTTP 客户端
- [ ] 实现内容过滤中间件（关键词黑名单）
- [ ] 创建 Prompt 管理模块
- [ ] 实现异步任务队列（使用 Bull/Redis）

**交付物**: DeepSeek API 集成完毕、内容安全过滤就绪

---

### Week 1 总结
**里程碑**: ✅ 后端 MVP 版本完成
- 完整的用户认证系统
- 数据库模型设计完成
- DeepSeek 集成与内容过滤
- 核心业务逻辑 API 就绪

---

### Week 2: Day 1-2 前端框架搭建

#### Day 1
- [ ] 使用官方微信开发者工具新建小程序项目
- [ ] 配置项目结构和 npm 依赖（vant weapp）
- [ ] 创建基础页面框架
- [ ] 配置网络请求封装
- [ ] 编写请求拦截器（token 管理）

**交付物**: 前端项目骨架完成

#### Day 2
- [ ] 设计首页布局（免责声明 + 开始按钮）
- [ ] 实现用户登录弹窗（微信授权）
- [ ] 创建底部导航栏
- [ ] 配置页面路由

**交付物**: 基础 UI 框架完成

---

### Week 2: Day 3-4 核心页面实现

#### Day 3
- [ ] 实现「起卦页」表单
  - 选择卦象类型（下拉框/单选）
  - 输入提问内容（textarea）
  - 提交按钮 + 加载状态
- [ ] 调用后端创建起卦接口
- [ ] 处理错误反馈

**交付物**: 起卦输入功能完成

#### Day 4
- [ ] 实现「结果页」展示
  - AI 回复内容展示（支持分段）
  - 分享功能（微信原生分享）
  - 保存到历史按钮
- [ ] 实现「历史记录页」
  - 列表展示（日期、问题、简要结果）
  - 点击查看详情
  - 删除记录功能

**交付物**: 完整用户交互流程可用

---

### Week 2: Day 5 前后端联调

#### Day 5
- [ ] 完整链路测试（从登录 → 起卦 → 结果 → 历史）
- [ ] 修复界面 UI Bug
- [ ] 性能优化（图片压缩、代码分割）
- [ ] 撰写小程序端测试用例

**交付物**: MVP 版本可交付（内部测试）

---

### Week 2 总结
**里程碑**: ✅ MVP 完整版本
- 前后端完整链路就绪
- 所有核心功能实现
- 基础测试通过

---

## 📅 第 2-3 周：部署与灰度上线

### Week 2-3: Day 1-2 生产部署

#### Day 1-2
- [ ] 后端部署到服务器
  - 配置 Nginx 反向代理
  - 配置 HTTPS 证书（Let's Encrypt）
  - 启用 gzip 压缩
  - 配置日志收集（ELK 或简易 Syslog）
- [ ] 配置 PM2 进程管理
- [ ] 配置环境变量（DeepSeek Key、DB 链接等）
- [ ] 数据库备份策略配置

**交付物**: 后端生产环境就绪

---

### Week 2-3: Day 3-4 微信小程序审核

#### Day 3
- [ ] 完善隐私政策 + 服务条款
- [ ] 配置微信小程序后端域名
  - 登录微信公众平台
  - 配置合法域名、业务域名、上传文件域名
  - 下载校验文件，上传到服务器 `.well-known/` 目录
- [ ] 编写审核说明文档
- [ ] 截图准备（5 张）
- [ ] 准备分类和描述文案

**交付物**: 审核材料完整

#### Day 4
- [ ] 提交微信审核
- [ ] 关注审核反馈（通常 1-3 天反馈）
- [ ] 根据反馈修改内容（如需要）

**交付物**: 提交审核单据

---

### Week 2-3: Day 5-6 灰度测试

#### Day 5-6
- [ ] 邀请 10-20 个种子用户进行灰度测试
- [ ] 收集反馈：
  - 结果准确性/质量反馈
  - 界面 UX 问题
  - 加载速度反馈
  - 崩溃/异常日志
- [ ] 紧急 Bug 修复
- [ ] 性能优化迭代

**交付物**: Bug 列表 + 性能数据

---

### Week 2-3: Day 7 全量上线

#### Day 7
- [ ] 确认审核通过
- [ ] 一键上线（取消灰度限制）
- [ ] 开启小程序分享功能
- [ ] 发布上线公告（朋友圈、微信群等）
- [ ] 持续监控服务状态和错误日志

**交付物**: ✅ 小程序正式上架

---

### Week 2-3 总结
**里程碑**: ✅ 正式上线
- 生产环境部署完成
- 微信审核通过
- 小程序上架
- 监控告警就绪

---

## 📅 第 3-4 周：快速迭代冲刺 100 日活

### Week 3-4 每日 Standup 检查

#### 指标监控清单
- [ ] 日活用户数 (DAU)
- [ ] 人均起卦次数
- [ ] API 响应时间 (p95)
- [ ] 错误率
- [ ] 微信分享点击率
- [ ] 页面留存率

---

### Week 3: Day 1-2 内容优化

- [ ] 分析高频提问类型
- [ ] 优化 Prompt 模板（基于用户反馈）
- [ ] 调整内容审核规则
- [ ] A/B 测试不同卦象类型
- [ ] 增加「置顶」推荐功能

**目标**: 提升内容质量、提高复购率

---

### Week 3: Day 3-4 传播优化

- [ ] 优化分享卡片文案
- [ ] 添加「邀请好友」功能（简单激励）
- [ ] 配置微信小程序分享弹窗引导
- [ ] 制作分享图片模板

**目标**: 冷启动期快速获取新用户

---

### Week 3: Day 5 性能优化

- [ ] 优化数据库查询（添加缓存）
- [ ] 启用 Redis 缓存热点数据
- [ ] 压缩 API 响应体积
- [ ] 前端图片懒加载
- [ ] 小程序包大小优化

**目标**: 页面加载 < 2s，API 响应 < 500ms

---

### Week 4: Day 1-3 功能扩展

- [ ] 根据反馈添加新卦象类型
- [ ] 实现「每日运势」定时推送
- [ ] 添加「星座」分析功能（可选）
- [ ] 支持「语音提问」（可选）
- [ ] 配置用户反馈表单

**目标**: 增加用户粘性

---

### Week 4: Day 4-5 最终冲刺

- [ ] 数据驱动的决策
- [ ] 基于前 3 周数据调整策略
- [ ] 完善监控告警规则
- [ ] 撰写第一期产品总结

**目标**: ✅ 达成 100+ 日活

---

## 📊 关键里程碑总结

| 周期 | 里程碑 | 状态 |
|-----|------|------|
| Week 1 | 后端 MVP 完成 | 📋 |
| Week 2 | 前后端联调完成、提交审核 | 📋 |
| Week 2-3 | 正式上架 | 📋 |
| Week 3 | 日活 50+ | 📋 |
| Week 4 | 日活 100+ | 🎯 |

---

## 风险识别与应对

| 风险 | 概率 | 影响 | 应对 |
|-----|------|------|------|
| 微信审核不通过 | 中 | 高 | 提前充分测试，准备修改方案 |
| DeepSeek API 配额不足 | 低 | 高 | 提前升级账户额度，配置速率限制 |
| 服务器宕机 | 低 | 高 | 配置监控告警，准备快速回滚 |
| 用户获取缓慢 | 中 | 中 | 提前准备分享激励机制 |
| 内容质量差 | 中 | 中 | 优化 Prompt，扩充模板库 |

---

## 每日交付清单

### Day 交付标准
- [ ] 完成当日任务 100%
- [ ] 通过代码审查（自审）
- [ ] 本地测试通过
- [ ] 更新 GitHub Issues/PRs
- [ ] 记录学习笔记

### Week 交付标准
- [ ] 所有 Day 交付物整合
- [ ] 端到端测试
- [ ] 部署到测试环境
- [ ] 撰写周总结
- [ ] 更新计划（如需调整）
